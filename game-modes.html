<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§  BrainFun Studio - ë‹¤ì–‘í•œ ê²Œì„ ëª¨ë“œ</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .mode-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .mode-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .mode-card.difficulty { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .mode-card.type { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .mode-card.time-attack { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .mode-card.levelup { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; }

        .mode-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .mode-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .mode-description {
            font-size: 0.9rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        .sub-modes {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .sub-mode-btn {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .sub-mode-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.4);
            transform: scale(1.05);
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.1);
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .timer-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ef4444;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            display: none;
        }

        .level-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }

        .level-progress {
            background: rgba(255,255,255,0.2);
            height: 10px;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .level-progress-fill {
            background: #4ade80;
            height: 100%;
            transition: width 0.3s ease;
        }

        .time-attack-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: white;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .mode-results {
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
            display: none;
        }

        @media (max-width: 768px) {
            .mode-selection {
                grid-template-columns: 1fr;
            }

            .sub-modes {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="back-btn" onclick="goBack()" id="backBtn" style="display: none;">â† ëŒì•„ê°€ê¸°</button>
        <div class="timer-display" id="timerDisplay">02:30</div>

        <!-- Header -->
        <header class="header">
            <h1>ğŸ§  BrainFun Studio</h1>
            <p>ë‹¤ì–‘í•œ ê²Œì„ ëª¨ë“œë¡œ ë‘ë‡Œë¥¼ ë‹¨ë ¨í•˜ì„¸ìš”</p>
        </header>

        <!-- Main Mode Selection -->
        <div id="mainModeSelection" class="main-content">
            <h2>ê²Œì„ ëª¨ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>

            <div class="mode-selection">
                <!-- ë‚œì´ë„ë³„ ëª¨ë“œ -->
                <div class="mode-card difficulty" onclick="showDifficultyModes()">
                    <div class="mode-icon">ğŸ¯</div>
                    <div class="mode-title">ë‚œì´ë„ë³„ ëª¨ë“œ</div>
                    <div class="mode-description">
                        ì´ˆê¸‰ë¶€í„° ê³ ê¸‰ê¹Œì§€<br>
                        ê° ë‚œì´ë„ì— íŠ¹í™”ëœ ë¬¸ì œ ìœ í˜•ìœ¼ë¡œ êµ¬ì„±
                    </div>
                </div>

                <!-- ë¬¸ì œ ìœ í˜•ë³„ ëª¨ë“œ -->
                <div class="mode-card type" onclick="showTypeModes()">
                    <div class="mode-icon">ğŸ§©</div>
                    <div class="mode-title">ë¬¸ì œ ìœ í˜•ë³„ ëª¨ë“œ</div>
                    <div class="mode-description">
                        ìˆ˜ì—´, ê·¸ë¦¬ë“œ, ë©˜ì‚¬ ìŠ¤íƒ€ì¼ ë“±<br>
                        íŠ¹ì • ë¬¸ì œ ìœ í˜•ë§Œ ì§‘ì¤‘ í•™ìŠµ
                    </div>
                </div>

                <!-- íƒ€ì„ì–´íƒ ëª¨ë“œ -->
                <div class="mode-card time-attack" onclick="showTimeAttackModes()">
                    <div class="mode-icon">âš¡</div>
                    <div class="mode-title">íƒ€ì„ì–´íƒ ëª¨ë“œ</div>
                    <div class="mode-description">
                        ì œí•œì‹œê°„ ë‚´ ìµœëŒ€í•œ ë§ì´!<br>
                        60ì´ˆ/90ì´ˆ/180ì´ˆ ì„ íƒ ê°€ëŠ¥
                    </div>
                </div>

                <!-- ë ˆë²¨ì—… ëª¨ë“œ -->
                <div class="mode-card levelup" onclick="showLevelupMode()">
                    <div class="mode-icon">ğŸ§—</div>
                    <div class="mode-title">ë ˆë²¨ì—… ëª¨ë“œ</div>
                    <div class="mode-description">
                        ìŠ¤í…Œì´ì§€ë³„ ë„ì „!<br>
                        ì‰¬ìš´ ë¬¸ì œë¶€í„° ì ì§„ì  ë‚œì´ë„ ìƒìŠ¹
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <a href="index.html" class="btn btn-secondary">ê¸°ë³¸ ëª¨ë“œë¡œ ëŒì•„ê°€ê¸°</a>
            </div>
        </div>

        <!-- ë‚œì´ë„ë³„ ëª¨ë“œ ì„ íƒ -->
        <div id="difficultyModeSelection" class="main-content" style="display: none;">
            <h2>ğŸ¯ ë‚œì´ë„ë³„ ëª¨ë“œ</h2>
            <p>ê° ë‚œì´ë„ì— ìµœì í™”ëœ ë¬¸ì œ ìœ í˜•ì„ ê²½í—˜í•˜ì„¸ìš”</p>

            <div class="sub-modes" style="display: grid;">
                <div class="sub-mode-btn" onclick="startDifficultyMode('easy')">
                    <h3>ğŸŸ¢ ì´ˆê¸‰ ëª¨ë“œ</h3>
                    <p>ìˆ˜ì—´ + ë‹¤ë¥¸í•˜ë‚˜ ì°¾ê¸°</p>
                    <small>íŒ¨í„´ ì¸ì‹ ê¸°ì´ˆ í›ˆë ¨</small>
                </div>

                <div class="sub-mode-btn" onclick="startDifficultyMode('medium')">
                    <h3>ğŸŸ¡ ì¤‘ê¸‰ ëª¨ë“œ</h3>
                    <p>ìˆ˜ì—´ + ë¹„ë¡€ + ì²´ìŠ¤íŒ</p>
                    <small>ë…¼ë¦¬ì  ê´€ê³„ íŒŒì•…</small>
                </div>

                <div class="sub-mode-btn" onclick="startDifficultyMode('hard')">
                    <h3>ğŸ”´ ê³ ê¸‰ ëª¨ë“œ</h3>
                    <p>ê·¸ë¦¬ë“œ + ìˆ˜ì‹ + ë³µí•© ë¹„ë¡€</p>
                    <small>ê³ ì°¨ì› ì¶”ìƒì  ì‚¬ê³ </small>
                </div>
            </div>
        </div>

        <!-- ë¬¸ì œ ìœ í˜•ë³„ ëª¨ë“œ ì„ íƒ -->
        <div id="typeModeSelection" class="main-content" style="display: none;">
            <h2>ğŸ§© ë¬¸ì œ ìœ í˜•ë³„ ëª¨ë“œ</h2>
            <p>íŠ¹ì • ì‚¬ê³  ì˜ì—­ì„ ì§‘ì¤‘ íŠ¸ë ˆì´ë‹í•˜ì„¸ìš”</p>

            <div class="sub-modes" style="display: grid;">
                <div class="sub-mode-btn" onclick="startTypeMode('sequence')">
                    <h3>ğŸ”¢ ìˆ˜ì—´ ëª¨ë“œ</h3>
                    <p>íŒ¨í„´ ì¸ì‹ ì „ë¬¸</p>
                    <small>â—â†’â—â—â†’â—â—â— ì‹œë¦¬ì¦ˆ</small>
                </div>

                <div class="sub-mode-btn" onclick="startTypeMode('grid')">
                    <h3>â¬œ ê·¸ë¦¬ë“œ ëª¨ë“œ</h3>
                    <p>ê³µê°„ ë…¼ë¦¬ ì „ë¬¸</p>
                    <small>ì²´ìŠ¤íŒ, 3Ã—3 í¼ì¦</small>
                </div>

                <div class="sub-mode-btn" onclick="startTypeMode('analogy')">
                    <h3>â†”ï¸ ë¹„ë¡€ ëª¨ë“œ</h3>
                    <p>ê´€ê³„ ì¶”ë¡  ì „ë¬¸</p>
                    <small>Aâ†’B :: Câ†’? ì‹œë¦¬ì¦ˆ</small>
                </div>

                <div class="sub-mode-btn" onclick="startTypeMode('mensa')">
                    <h3>ğŸ§  ë©˜ì‚¬ ìŠ¤íƒ€ì¼</h3>
                    <p>ê³ ë‚œë„ ì¢…í•© ë¬¸ì œ</p>
                    <small>ê·¸ë¦¬ë“œ+ë¹„ë¡€+ìˆ˜ì‹ í˜¼í•©</small>
                </div>

                <div class="sub-mode-btn" onclick="startTypeMode('odd-one-out')">
                    <h3>ğŸ” ë‹¤ë¥¸í•˜ë‚˜ ì°¾ê¸°</h3>
                    <p>ì°¨ì´ì  ì‹ë³„ ì „ë¬¸</p>
                    <small>â– â– â– â— ìŠ¤íƒ€ì¼</small>
                </div>

                <div class="sub-mode-btn" onclick="startTypeMode('equation')">
                    <h3>â• ìˆ˜ì‹ ëª¨ë“œ</h3>
                    <p>ë„í˜• ìˆ˜í•™ ì „ë¬¸</p>
                    <small>â–³+â– =? ê³„ì‚°</small>
                </div>
            </div>
        </div>

        <!-- íƒ€ì„ì–´íƒ ëª¨ë“œ ì„ íƒ -->
        <div id="timeAttackModeSelection" class="main-content" style="display: none;">
            <h2>âš¡ íƒ€ì„ì–´íƒ ëª¨ë“œ</h2>
            <p>ì œí•œì‹œê°„ ë‚´ ìµœëŒ€í•œ ë§ì€ ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”!</p>

            <div class="sub-modes" style="display: grid;">
                <div class="sub-mode-btn" onclick="startTimeAttack(60)">
                    <h3>âš¡ ìŠ¤í”„ë¦°íŠ¸</h3>
                    <p>60ì´ˆ ì±Œë¦°ì§€</p>
                    <small>ì´ˆê³ ì† ì§ê° í…ŒìŠ¤íŠ¸</small>
                </div>

                <div class="sub-mode-btn" onclick="startTimeAttack(90)">
                    <h3>ğŸƒ ëŸ¬ë‹</h3>
                    <p>90ì´ˆ ì±Œë¦°ì§€</p>
                    <small>ë¹ ë¥¸ íŒë‹¨ë ¥ í…ŒìŠ¤íŠ¸</small>
                </div>

                <div class="sub-mode-btn" onclick="startTimeAttack(180)">
                    <h3>ğŸš´ ì‚¬ì´í´ë§</h3>
                    <p>180ì´ˆ ì±Œë¦°ì§€</p>
                    <small>ì§€ì†ì  ì§‘ì¤‘ë ¥ í…ŒìŠ¤íŠ¸</small>
                </div>
            </div>
        </div>

        <!-- ë ˆë²¨ì—… ëª¨ë“œ í™”ë©´ -->
        <div id="levelupMode" class="main-content" style="display: none;">
            <div class="level-info">
                <h2>ğŸ§— ë ˆë²¨ì—… ëª¨ë“œ</h2>
                <div>
                    <strong>Stage <span id="currentStage">1</span></strong>
                    <span id="stageDescription">ê¸°ì´ˆ ìˆ˜ì—´ íŒ¨í„´ ë§ˆìŠ¤í„°</span>
                </div>
                <div class="level-progress">
                    <div id="levelProgressFill" class="level-progress-fill" style="width: 0%"></div>
                </div>
                <div id="stageProgress">0/5 í´ë¦¬ì–´</div>
            </div>

            <!-- í˜„ì¬ ìŠ¤í…Œì´ì§€ ë¬¸ì œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            <div id="levelupPuzzleArea"></div>
        </div>

        <!-- ê²Œì„ í”Œë ˆì´ ì˜ì—­ -->
        <div id="gamePlayArea" class="main-content" style="display: none;">
            <!-- íƒ€ì„ì–´íƒ ì „ìš© ìƒíƒœí‘œì‹œ -->
            <div id="timeAttackStats" class="time-attack-stats" style="display: none;">
                <div class="stat-card">
                    <span id="solvedCount" class="stat-value">0</span>
                    <span class="stat-label">í•´ê²°í•œ ë¬¸ì œ</span>
                </div>
                <div class="stat-card">
                    <span id="correctCount" class="stat-value">0</span>
                    <span class="stat-label">ì •ë‹µ</span>
                </div>
                <div class="stat-card">
                    <span id="accuracyRate" class="stat-value">0%</span>
                    <span class="stat-label">ì •ë‹µë¥ </span>
                </div>
            </div>

            <!-- ë¬¸ì œ í‘œì‹œ ì˜ì—­ -->
            <div class="puzzle-container">
                <!-- ë¬¸ì œ ìœ í˜• í‘œì‹œ -->
                <div id="problemTypeIndicator" style="text-align: center; margin-bottom: 20px; font-weight: bold; color: #666;"></div>

                <!-- Sequence Display -->
                <div class="sequence-container">
                    <h3 id="puzzleTitle">ë‹¤ìŒ íŒ¨í„´ì„ ë³´ê³  ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ë„í˜•ì„ ì„ íƒí•˜ì„¸ìš”</h3>
                    <div id="sequenceDisplay" class="sequence-display"></div>
                    <div class="sequence-arrow">â†“</div>
                    <div class="missing-indicator">?</div>
                </div>

                <!-- Grid Display -->
                <div id="gridContainer" class="grid-container" style="display: none;">
                    <h3>ê·¸ë¦¬ë“œì˜ ê·œì¹™ì„ ì°¾ì•„ ë¹ˆì¹¸ì„ ì±„ìš°ì„¸ìš”</h3>
                    <div id="gridDisplay" class="grid-display"></div>
                </div>

                <!-- Extended Puzzle Display -->
                <div id="extendedPuzzleContainer" class="extended-puzzle" style="display: none;">
                    <h3 id="extendedPuzzleTitle">ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”</h3>
                    <div id="extendedPuzzleContent"></div>
                </div>

                <!-- Options -->
                <div class="options-section">
                    <h4>ì •ë‹µì„ ì„ íƒí•˜ì„¸ìš”:</h4>
                    <div id="optionsContainer" class="options-container"></div>
                </div>

                <!-- Feedback -->
                <div id="feedback" class="feedback"></div>
            </div>

            <!-- Game Controls -->
            <div class="controls" style="text-align: center; margin-top: 30px;">
                <button id="nextBtn" class="btn btn-primary" onclick="nextProblem()" style="display: none;">ë‹¤ìŒ ë¬¸ì œ</button>
                <button id="skipBtn" class="btn btn-secondary" onclick="skipProblem()">ê±´ë„ˆë›°ê¸°</button>
                <button id="pauseBtn" class="btn btn-secondary" onclick="pauseGame()">ì¼ì‹œì •ì§€</button>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="gameResults" class="mode-results">
            <h2 id="resultsTitle">ğŸ‰ ê²Œì„ ì™„ë£Œ!</h2>
            <div id="resultsContent">
                <!-- ê²°ê³¼ ë‚´ìš©ì´ ë™ì ìœ¼ë¡œ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-primary" onclick="restartCurrentMode()">ë‹¤ì‹œ ë„ì „</button>
                <button class="btn btn-secondary" onclick="showMainModes()">ëª¨ë“œ ì„ íƒìœ¼ë¡œ</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/shape-generator.js"></script>
    <script src="js/game-modes.js"></script>
</body>
</html>