<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IQZone - IQ Assessment & High IQ Challenge</title>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* 반응형 컨테이너 스타일 */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* 공통 카드 스타일 */
        .intro-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .ranking-grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .ranking-column {
            background: rgba(248, 249, 250, 0.8);
            border-radius: 10px;
            padding: 12px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .main-ranking-table {
            font-size: 0.8rem;
        }

        /* 스마트폰 최적화 */
        @media (max-width: 480px) {
            .main-container {
                padding: 0 10px;
            }

            .intro-section {
                padding: 15px;
                margin-bottom: 15px;
                border-radius: 12px;
            }

            .ranking-grid-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .ranking-column {
                padding: 8px;
                border-radius: 8px;
            }

            .main-ranking-table {
                font-size: 0.7rem;
            }

            header {
                padding: 35px 15px !important;
            }

            header h1 {
                font-size: 2.2rem !important;
                text-shadow: 3px 3px 6px rgba(0,0,0,0.6) !important;
                letter-spacing: 1px !important;
            }

            header div:first-of-type {
                margin-bottom: 15px !important;
            }

            header div[style*="background: linear-gradient(90deg"] {
                font-size: 1rem !important;
            }

            header p {
                font-size: 0.85rem !important;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.5) !important;
            }

            /* 스마트폰 무료 회원가입 안내 최적화 */
            header div[style*="backdrop-filter"] {
                margin: 15px auto 0 auto !important;
                padding: 12px 20px !important;
                max-width: 95% !important;
                border-radius: 15px !important;
            }

            header div[style*="backdrop-filter"] p:first-child {
                font-size: 0.95rem !important;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.6) !important;
            }

            header div[style*="backdrop-filter"] p:last-child {
                font-size: 0.8rem !important;
                text-shadow: 1px 1px 3px rgba(0,0,0,0.6) !important;
            }

            .test-type-card {
                padding: 15px !important;
                margin-bottom: 10px !important;
            }

            /* 스마트폰에서 테스트 카드 2x2 그리드 */
            .intro-section > div[style*="grid-template-columns"] {
                grid-template-columns: 1fr 1fr !important;
                gap: 10px !important;
            }

            /* 스마트폰에서 평가 방식 카드 1열로 */
            .intro-section div[style*="repeat(auto-fit"] {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }

            #authForm {
                margin: 10px !important;
                padding: 15px !important;
                max-width: calc(100% - 20px) !important;
            }

            /* 스마트폰 테스트 화면 최적화 */
            .question-card {
                padding: 20px !important;
                margin-bottom: 15px !important;
            }

            .question-text {
                font-size: 1.1rem !important;
                font-weight: 600 !important;
                line-height: 1.4 !important;
                margin-bottom: 20px !important;
            }

            .options-grid {
                gap: 12px !important;
                margin-top: 20px !important;
            }

            .option {
                padding: 12px 8px !important;
                min-height: 35px !important;
                font-size: 0.95rem !important;
                border-radius: 8px !important;
                line-height: 1.2 !important;
            }

            .option-label {
                font-size: 0.95rem !important;
            }

            .nav-buttons {
                margin-top: 20px !important;
                gap: 10px !important;
            }

            .nav-buttons .btn,
            .nav-buttons .btn-secondary {
                padding: 8px 16px !important;
                font-size: 0.85rem !important;
                border-radius: 6px !important;
                min-width: auto !important;
            }

            .progress-bar {
                height: 6px !important;
                margin-bottom: 20px !important;
            }

            .question-header {
                margin-bottom: 15px !important;
                flex-wrap: wrap !important;
                gap: 8px !important;
            }

            .question-number,
            .timer {
                font-size: 0.8rem !important;
            }

            .category-badge,
            .difficulty-badge {
                font-size: 0.7rem !important;
                padding: 3px 8px !important;
            }
        }

        /* 태블릿 최적화 */
        @media (max-width: 768px) and (min-width: 481px) {
            .main-container {
                padding: 0 15px;
            }

            .ranking-grid-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .ranking-column {
                padding: 10px;
            }

            .main-ranking-table {
                font-size: 0.75rem;
            }

            header h1 {
                font-size: 2.6rem !important;
                text-shadow: 3px 3px 6px rgba(0,0,0,0.5) !important;
                letter-spacing: 1.5px !important;
            }

            header div[style*="background: linear-gradient(90deg"] {
                font-size: 1.2rem !important;
            }

            header p {
                text-shadow: 1px 1px 3px rgba(0,0,0,0.4) !important;
            }

            header div[style*="backdrop-filter"] p:first-child {
                font-size: 1rem !important;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.5) !important;
            }

            /* 태블릿 테스트 화면 최적화 */
            .question-text {
                font-size: 1.2rem !important;
                line-height: 1.5 !important;
            }

            .option {
                padding: 18px 12px !important;
                min-height: 50px !important;
                font-size: 1rem !important;
            }

            .nav-buttons .btn,
            .nav-buttons .btn-secondary {
                padding: 10px 20px !important;
                font-size: 0.9rem !important;
            }
        }

        /* 데스크톱 최적화 */
        @media (min-width: 769px) {
            .ranking-grid-container {
                grid-template-columns: repeat(4, 1fr);
                gap: 15px;
            }

            /* 데스크톱 테스트 화면 가독성 개선 */
            .question-text {
                font-size: 1.4rem !important;
                font-weight: 600 !important;
                line-height: 1.6 !important;
                margin-bottom: 25px !important;
            }

            .option {
                font-size: 1.1rem !important;
                line-height: 1.3 !important;
                padding: 20px !important;
            }

            .option-label {
                font-size: 1.1rem !important;
            }
        }
    </style>
</head>

<body>
    <!-- 상단 로그인 영역 -->
    <div id="userAuthSection" style="background: rgba(0, 212, 255, 0.05); border-bottom: 1px solid rgba(0, 212, 255, 0.1); padding: 10px 20px; text-align: right;">
        <div id="notLoggedInSection">
            <button id="loginBtn" onclick="toggleAuthForm()" style="background: #00d4ff; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-left: 10px;">로그인/회원가입</button>
        </div>
        <div id="loggedInSection" style="display: none;">
            <span id="userInfo" style="color: #333; margin-right: 15px;">
                안녕하세요, <span id="userDisplay">닉네임님</span>
            </span>
            <button id="logoutBtn" onclick="logout()" style="background: #6c757d; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">로그아웃</button>
        </div>
    </div>

    <!-- 로그인/회원가입 폼 -->
    <div id="authForm" style="display: none; background: white; border: 2px solid #00d4ff; border-radius: 12px; padding: 25px; margin: 20px auto; max-width: 400px; box-shadow: 0 4px 12px rgba(0, 212, 255, 0.2); position: relative; z-index: 1000;">
        <!-- 탭 메뉴 -->
        <div style="display: flex; margin-bottom: 20px; border-bottom: 1px solid #ddd;">
            <button id="loginTab" onclick="switchAuthTab('login')" style="flex: 1; padding: 10px; border: none; background: none; cursor: pointer; border-bottom: 2px solid #00d4ff; color: #00d4ff; font-weight: 500;">로그인</button>
            <button id="registerTab" onclick="switchAuthTab('register')" style="flex: 1; padding: 10px; border: none; background: none; cursor: pointer; color: #666;">회원가입</button>
        </div>

        <!-- 로그인 폼 -->
        <div id="loginForm">
            <h3 style="color: #00d4ff; margin-bottom: 20px; text-align: center;">로그인</h3>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">닉네임:</label>
                <input type="text" id="loginNicknameInput" placeholder="닉네임을 입력하세요" onkeypress="handleLoginKeypress(event)" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box;">
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">비밀번호:</label>
                <input type="password" id="loginPasswordInput" placeholder="비밀번호를 입력하세요" onkeypress="handleLoginKeypress(event)" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box;">
            </div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="attemptLogin()" style="background: #00d4ff; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 500;">로그인</button>
                <button onclick="toggleAuthForm()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">취소</button>
            </div>
        </div>

        <!-- 회원가입 폼 -->
        <div id="registerForm" style="display: none;">
            <h3 style="color: #00d4ff; margin-bottom: 20px; text-align: center;">회원가입</h3>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">닉네임:</label>
                <input type="text" id="registerNicknameInput" placeholder="닉네임을 입력하세요" onkeypress="handleRegisterKeypress(event)" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">나이:</label>
                <input type="number" id="registerAgeInput" placeholder="나이를 입력하세요" min="1" max="120" onkeypress="handleRegisterKeypress(event)" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">비밀번호:</label>
                <input type="password" id="registerPasswordInput" placeholder="비밀번호를 입력하세요 (4글자 이상)" onkeypress="handleRegisterKeypress(event)" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box;">
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">비밀번호 확인:</label>
                <input type="password" id="confirmPasswordInput" placeholder="비밀번호를 다시 입력하세요" onkeypress="handleRegisterKeypress(event)" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box;">
            </div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="attemptRegister()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 500;">회원가입</button>
                <button onclick="toggleAuthForm()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">취소</button>
            </div>
        </div>
    </div>

    <!-- 메인 헤더 베너 -->
    <header style="text-align: center; padding: 50px 20px; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #3b82f6 100%); color: white; margin-bottom: 30px; position: relative; box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
        <!-- 배경 패턴 오버레이 -->
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%); pointer-events: none;"></div>

        <div style="max-width: 1200px; margin: 0 auto; position: relative; z-index: 1;">
            <!-- 메인 로고와 타이틀 -->
            <div style="margin-bottom: 20px;">
                <h1 style="margin: 0 0 15px 0; font-size: 3rem; font-weight: 800; text-shadow: 3px 3px 6px rgba(0,0,0,0.5); color: #ffffff; letter-spacing: 2px;">
                    🧠 IQZone
                </h1>
                <div style="background: linear-gradient(90deg, #ffffff, #e0e7ff, #ffffff); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 1.3rem; font-weight: 600; text-shadow: none; margin-bottom: 8px;">
                    과학적 IQ 측정과 인지능력 평가
                </div>
                <p style="margin: 0; font-size: 1rem; color: #e0e7ff; font-weight: 500; text-shadow: 1px 1px 3px rgba(0,0,0,0.4);">
                    CHC 이론 기반 다차원 지능 분석 시스템
                </p>
            </div>

            <!-- 무료 회원가입 안내 카드 -->
            <div style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15)); border: 2px solid rgba(255, 255, 255, 0.4); border-radius: 20px; padding: 16px 30px; margin: 25px auto 0 auto; max-width: 450px; backdrop-filter: blur(15px); box-shadow: 0 8px 25px rgba(0,0,0,0.2);">
                <p style="margin: 0; font-size: 1.1rem; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); color: #ffffff;">
                    ✨ 닉네임만으로 <span style="color: #FFD700; font-weight: 800; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">무료 회원가입</span> 가능!
                </p>
                <p style="margin: 8px 0 0 0; font-size: 0.9rem; color: #f1f5f9; font-weight: 500; text-shadow: 1px 1px 3px rgba(0,0,0,0.5);">
                    간편 가입으로 개인 기록 관리 및 랭킹 참여
                </p>
            </div>
        </div>
    </header>

    <!-- 메인 컨테이너 -->
    <div class="main-container" style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">

        <!-- 통합 랭킹 카드 -->
        <div class="intro-section" style="margin-bottom: 30px; padding: 20px; border-radius: 15px; background: rgba(255, 255, 255, 0.8); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);">
            <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #333; font-size: 1.2rem;">🏆 유형별 랭킹 TOP 10</h2>
                <button onclick="refreshAllTypeRankings()" style="background: none; border: none; cursor: pointer; font-size: 1rem; color: #00d4ff; margin-left: 10px;">🔄</button>
            </div>

            <div class="ranking-grid-container">
                <!-- 쉬움테스트 랭킹 -->
                <div class="ranking-column">
                    <div style="text-align: center; margin-bottom: 8px;">
                        <h3 style="color: #22c55e; margin: 0; font-size: 0.9rem;">🟢 쉬움</h3>
                        <div id="myEasyRank" style="font-size: 0.7rem; color: #666; margin-top: 2px;"></div>
                    </div>
                    <div id="mainEasyRanking" class="main-ranking-table"></div>
                </div>

                <!-- 중간테스트 랭킹 -->
                <div class="ranking-column">
                    <div style="text-align: center; margin-bottom: 8px;">
                        <h3 style="color: #f97316; margin: 0; font-size: 0.9rem;">🟡 중간</h3>
                        <div id="myMediumRank" style="font-size: 0.7rem; color: #666; margin-top: 2px;"></div>
                    </div>
                    <div id="mainMediumRanking" class="main-ranking-table"></div>
                </div>

                <!-- 고난도테스트 랭킹 -->
                <div class="ranking-column">
                    <div style="text-align: center; margin-bottom: 8px;">
                        <h3 style="color: #ef4444; margin: 0; font-size: 0.9rem;">🔴 고난도</h3>
                        <div id="myHardRank" style="font-size: 0.7rem; color: #666; margin-top: 2px;"></div>
                    </div>
                    <div id="mainHardRanking" class="main-ranking-table"></div>
                </div>

                <!-- 종합테스트 랭킹 -->
                <div class="ranking-column">
                    <div style="text-align: center; margin-bottom: 8px;">
                        <h3 style="color: #00d4ff; margin: 0; font-size: 0.9rem;">🧠 종합</h3>
                        <div id="myComprehensiveRank" style="font-size: 0.7rem; color: #666; margin-top: 2px;"></div>
                    </div>
                    <div id="mainComprehensiveRanking" class="main-ranking-table"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 시작 화면 -->
    <div class="intro-section" id="intro">
        <h2>IQ 테스트 시작</h2>
        <p>다양한 난이도의 IQ 테스트를 선택하여 인지능력을 평가해보세요. 선택 즉시 테스트가 시작됩니다.</p>

        <!-- 테스트 유형 선택 (종합테스트 마지막 배치) -->
        <div
            style="background: rgba(123, 44, 191, 0.05); border-radius: 15px; padding: 25px; margin: 25px 0; border: 1px solid rgba(123, 44, 191, 0.2);">
            <h4 style="color: #7b2cbf; margin-bottom: 20px;">🎯 테스트 유형 선택 (클릭 시 바로 시작)</h4>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                <!-- 쉬움테스트 -->
                <div class="test-type-card" onclick="selectTestType('easy')"
                    style="border: 2px solid rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <span style="font-size: 1.5rem;">🟢</span>
                        <h5 style="color: #22c55e; margin: 0;">쉬움테스트</h5>
                    </div>
                    <p style="font-size: 0.9rem; color: #666; margin: 8px 0;">10문항 • 약 10분</p>
                    <p style="font-size: 0.85rem; color: #777;">기본적인 논리와 패턴 인식 문제</p>
                </div>

                <!-- 중간테스트 -->
                <div class="test-type-card" onclick="selectTestType('medium')"
                    style="border: 2px solid rgba(249, 115, 22, 0.3); border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <span style="font-size: 1.5rem;">🟡</span>
                        <h5 style="color: #f97316; margin: 0;">중간테스트</h5>
                    </div>
                    <p style="font-size: 0.9rem; color: #666; margin: 8px 0;">16문항 • 약 20분</p>
                    <p style="font-size: 0.85rem; color: #777;">중급 수준의 추론과 패턴 분석</p>
                </div>

                <!-- 고난도테스트 -->
                <div class="test-type-card" onclick="selectTestType('hard')"
                    style="border: 2px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <span style="font-size: 1.5rem;">🔴</span>
                        <h5 style="color: #ef4444; margin: 0;">고난도테스트</h5>
                    </div>
                    <p style="font-size: 0.9rem; color: #666; margin: 8px 0;">24문항 • 약 40분</p>
                    <p style="font-size: 0.85rem; color: #777;">고급 논리추론과 복합 패턴 분석</p>
                </div>

                <!-- 종합테스트 (마지막 배치) -->
                <div class="test-type-card selected" onclick="selectTestType('comprehensive')"
                    style="border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 12px; padding: 20px; cursor: pointer; transition: all 0.3s ease;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <span style="font-size: 1.5rem;">🧠</span>
                        <h5 style="color: #00d4ff; margin: 0;">종합테스트</h5>
                    </div>
                    <p style="font-size: 0.9rem; color: #666; margin: 8px 0;">25문항 • 약 25분</p>
                    <p style="font-size: 0.85rem; color: #777;">CHC 이론 기반 5개 인지 영역 종합 평가</p>
                </div>
            </div>
        </div>

    </div>

    <!-- 평가 방식 설명 섹션 -->
    <div class="intro-section" id="evaluationSection" style="margin-top: 20px;">
        <h2>📊 평가 방식</h2>
        <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">

            <div
                style="background: rgba(16, 185, 129, 0.05); border-radius: 12px; padding: 20px; border: 1px solid rgba(16, 185, 129, 0.2);">
                <h4 style="color: #059669; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                    🧠 다차원 분석
                </h4>
                <p style="color: #555555; font-size: 0.9rem; line-height: 1.5;">
                    CHC 이론 기반 5개 영역: 유동성 추론, 결정성 지식, 수리 논리, 패턴 인식, 시공간 처리 능력을 종합 평가합니다.
                </p>
            </div>

            <div
                style="background: rgba(245, 158, 11, 0.05); border-radius: 12px; padding: 20px; border: 1px solid rgba(245, 158, 11, 0.2);">
                <h4 style="color: #d97706; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                    📈 IRT 기반 평가
                </h4>
                <p style="color: #555555; font-size: 0.9rem; line-height: 1.5;">
                    문항반응이론(IRT) 3모수 로지스틱 모형과 최우추정법(MLE)을 사용하여 과학적으로 능력을 측정합니다.
                </p>
            </div>

            <div
                style="background: rgba(139, 92, 246, 0.05); border-radius: 12px; padding: 20px; border: 1px solid rgba(139, 92, 246, 0.2);">
                <h4 style="color: #8b5cf6; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                    👶 나이별 보정
                </h4>
                <p style="color: #555555; font-size: 0.9rem; line-height: 1.5;">
                    WAIS-IV/WISC-V 국제 규준과 Flynn Effect 보정(-0.3점/년)을 적용하여 과학적으로 나이를 보정합니다.
                </p>
            </div>

            <div
                style="background: rgba(239, 68, 68, 0.05); border-radius: 12px; padding: 20px; border: 1px solid rgba(239, 68, 68, 0.2);">
                <h4 style="color: #dc2626; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                    📏 국제 척도
                </h4>
                <p style="color: #555555; font-size: 0.9rem; line-height: 1.5;">
                    국제 표준 IQ 척도(평균 100, 표준편차 15)를 기반으로 점수를 산출합니다.
                </p>
            </div>

        </div>

        <div
            style="background: rgba(0, 212, 255, 0.03); border-radius: 12px; padding: 20px; margin-top: 20px; border: 1px solid rgba(0, 212, 255, 0.15);">
            <h4 style="color: #00d4ff; margin-bottom: 12px;">📊 평가 기준</h4>
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 0.85rem;">
                <div><span style="color: #059669;">● 130+ 매우 우수</span> (상위 2%)</div>
                <div><span style="color: #d97706;">● 120-129 우수</span> (상위 10%)</div>
                <div><span style="color: #8b5cf6;">● 110-119 평균 상</span> (상위 25%)</div>
                <div><span style="color: #6b7280;">● 90-109 평균</span> (50%)</div>
            </div>
        </div>
    </div>


    <!-- 테스트 화면 -->
    <div class="test-section" id="test">
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="question-card">
            <div class="question-header">
                <span class="question-number" id="questionNum">문제 1/25</span>
                <div>
                    <span class="category-badge" id="categoryBadge">패턴 인식</span>
                    <span class="difficulty-badge" id="difficultyBadge">쉬움</span>
                </div>
                <span class="timer" id="timer">60초</span>
            </div>

            <div id="questionContent">
                <!-- 문제 내용이 동적으로 삽입됨 -->
            </div>

            <div class="options-grid" id="optionsGrid">
                <!-- 선택지가 동적으로 삽입됨 -->
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="skipQuestion()">건너뛰기</button>
                <button class="btn" id="nextBtn" onclick="nextQuestion()" disabled>다음 문제</button>
            </div>
        </div>
    </div>

    <!-- 결과 화면 -->
    <div class="results-section" id="results">
        <h2>테스트 완료!</h2>

        <div class="score-circle">
            <span class="score-number" id="iqScore">--</span>
            <span class="score-label">IQ 점수</span>
        </div>

        <div class="iq-classification" id="iqClass">
            <h3 id="classLabel">분류</h3>
            <p id="classDesc">설명</p>
            <p class="percentile-info" id="percentile">상위 %</p>
            <p id="measurementInfo" style="font-size: 0.8rem; color: #888; margin-top: 5px;"></p>
        </div>

        <!-- 영역별 분석은 JavaScript에서 동적으로 생성됨 -->
        <div id="categoryAnalysis" style="display: none;"></div>

        <div
            style="text-align: center; margin-top: 30px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
            <button class="btn" onclick="location.reload()">다시 테스트하기</button>
            <button class="btn" onclick="showRankingPage()"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">랭킹 보기</button>
        </div>
    </div>

    <!-- 랭킹 페이지 -->
    <div class="ranking-page" id="rankingPage" style="display: none;">
        <h2>🏆 IQ 랭킹</h2>

        <!-- 랭킹 탭 메뉴 -->
        <div style="display: flex; justify-content: center; margin-bottom: 30px; gap: 10px; flex-wrap: wrap;">
            <button id="comprehensiveTab" class="ranking-tab active" onclick="showTestRanking('comprehensive')">🧠
                종합테스트</button>
            <button id="easyTab" class="ranking-tab" onclick="showTestRanking('easy')">🟢 쉬움</button>
            <button id="mediumTab" class="ranking-tab" onclick="showTestRanking('medium')">🟡 중간</button>
            <button id="hardTab" class="ranking-tab" onclick="showTestRanking('hard')">🔴 고난도</button>
        </div>

        <!-- 종합테스트 랭킹 섹션 -->
        <div id="comprehensiveRanking" class="ranking-section">
            <div class="ranking-header">
                <h3 style="color: #00d4ff; margin: 0; text-align: center; margin-bottom: 20px;">
                    🧠 종합테스트 랭킹 TOP 10
                </h3>
                <p style="text-align: center; color: #666; font-size: 0.9rem; margin-bottom: 20px;">
                    25문항 • 정확도 + 시간 기반 점수
                </p>
            </div>
            <div id="comprehensiveRankingList" class="ranking-list"></div>
            <div id="myComprehensiveRank" class="my-rank-section"></div>
        </div>

        <!-- 쉬움테스트 랭킹 섹션 -->
        <div id="easyRanking" class="ranking-section" style="display: none;">
            <div class="ranking-header">
                <h3 style="color: #22c55e; margin: 0; text-align: center; margin-bottom: 20px;">
                    🟢 쉬움테스트 랭킹 TOP 10
                </h3>
                <p style="text-align: center; color: #666; font-size: 0.9rem; margin-bottom: 20px;">
                    10문항 • 정확도 + 시간 기반 점수
                </p>
            </div>
            <div id="easyRankingList" class="ranking-list"></div>
            <div id="myEasyRank" class="my-rank-section"></div>
        </div>

        <!-- 중간테스트 랭킹 섹션 -->
        <div id="mediumRanking" class="ranking-section" style="display: none;">
            <div class="ranking-header">
                <h3 style="color: #f97316; margin: 0; text-align: center; margin-bottom: 20px;">
                    🟡 중간테스트 랭킹 TOP 10
                </h3>
                <p style="text-align: center; color: #666; font-size: 0.9rem; margin-bottom: 20px;">
                    16문항 • 정확도 + 시간 기반 점수
                </p>
            </div>
            <div id="mediumRankingList" class="ranking-list"></div>
            <div id="myMediumRank" class="my-rank-section"></div>
        </div>

        <!-- 고난도테스트 랭킹 섹션 -->
        <div id="hardRanking" class="ranking-section" style="display: none;">
            <div class="ranking-header">
                <h3 style="color: #ef4444; margin: 0; text-align: center; margin-bottom: 20px;">
                    🔴 고난도테스트 랭킹 TOP 10
                </h3>
                <p style="text-align: center; color: #666; font-size: 0.9rem; margin-bottom: 20px;">
                    24문항 • 정확도 + 시간 기반 점수
                </p>
            </div>
            <div id="hardRankingList" class="ranking-list"></div>
            <div id="myHardRank" class="my-rank-section"></div>
        </div>

        <!-- 메인으로 가기 버튼 -->
        <div style="text-align: center; margin-top: 40px;">
            <button class="btn" onclick="goBackToMain()" style="background: #6c757d; color: white;">🏠 메인으로
                돌아가기</button>
        </div>
        </div>
    </div>

    </div> <!-- 메인 컨테이너 닫기 -->

    <script src="new_questions.js"></script>
    <script src="new_test_types.js"></script>
    <script src="js/app.js"></script>
</body>

</html>